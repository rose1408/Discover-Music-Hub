<!DOCTYPE html>
<html>
<head>
    <title>Minimal Reports Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        .header { background: #2c3e50; color: white; padding: 15px; text-align: center; border-radius: 5px; }
        .controls { margin: 20px 0; padding: 15px; background: #ecf0f1; border-radius: 5px; }
        .btn { padding: 10px 20px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; }
        .btn-primary { background: #3498db; color: white; }
        .btn-secondary { background: #95a5a6; color: white; }
        .results { margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 5px; }
        input { padding: 8px; margin: 5px; border: 1px solid #ddd; border-radius: 3px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📊 Minimal Reports Test</h1>
            <button class="btn btn-secondary" onclick="goToPage('index.html')">← Back to Main</button>
        </div>
        
        <div class="controls">
            <h3>🗓️ Date Range</h3>
            <input type="date" id="fromDate" />
            <input type="date" id="toDate" />
            <br><br>
            <button class="btn btn-primary" onclick="applyFilter()">📊 Generate Report</button>
            <button class="btn btn-secondary" onclick="resetFilter()">🔄 Reset</button>
        </div>
        
        <div class="results">
            <h3>📈 Results</h3>
            <div id="output">No data loaded yet. Click "Generate Report" to test.</div>
        </div>
    </div>

    <script>
        console.log('🚀 Minimal Reports Script Starting...');
        
        // Method 1: Simple function declarations
        function applyFilter() {
            console.log('📊 Apply Filter Called');
            
            const fromDate = document.getElementById('fromDate').value;
            const toDate = document.getElementById('toDate').value;
            const output = document.getElementById('output');
            
            console.log('Dates:', fromDate, toDate);
            
            if (!fromDate || !toDate) {
                alert('Please select both dates');
                return;
            }
            
            output.innerHTML = `
                <strong>✅ SUCCESS!</strong><br>
                📅 From: ${fromDate}<br>
                📅 To: ${toDate}<br>
                📊 Demo data loaded successfully!<br>
                🎯 Total Students: 156<br>
                💰 Total Revenue: $45,000
            `;
            
            console.log('✅ Filter applied successfully');
        }
        
        function resetFilter() {
            console.log('🔄 Reset Filter Called');
            
            const today = new Date();
            const monthAgo = new Date(today);
            monthAgo.setDate(today.getDate() - 30);
            
            document.getElementById('fromDate').value = monthAgo.toISOString().split('T')[0];
            document.getElementById('toDate').value = today.toISOString().split('T')[0];
            
            applyFilter();
            console.log('✅ Filter reset successfully');
        }
        
        function goToPage(page) {
            console.log('🔗 Navigate to:', page);
            alert(`Navigation to: ${page}\n(In real app, this would navigate)`);
        }
        
        // Method 2: Also assign to window (backup)
        window.applyFilter = applyFilter;
        window.resetFilter = resetFilter;
        window.goToPage = goToPage;
        
        // Initialize page
        function initPage() {
            console.log('🎯 Initializing page...');
            
            // Set default dates
            const today = new Date();
            const monthAgo = new Date(today);
            monthAgo.setDate(today.getDate() - 30);
            
            document.getElementById('fromDate').value = monthAgo.toISOString().split('T')[0];
            document.getElementById('toDate').value = today.toISOString().split('T')[0];
            
            console.log('✅ Page initialized');
        }
        
        // Run when page loads
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initPage);
        } else {
            initPage();
        }
        
        // Verification
        setTimeout(() => {
            console.log('🔍 Function Check:');
            console.log('- applyFilter:', typeof applyFilter);
            console.log('- resetFilter:', typeof resetFilter);
            console.log('- goToPage:', typeof goToPage);
            console.log('- window.applyFilter:', typeof window.applyFilter);
            
            // Test if buttons exist
            const buttons = document.querySelectorAll('button[onclick]');
            console.log(`Found ${buttons.length} onclick buttons`);
            buttons.forEach((btn, i) => {
                console.log(`Button ${i+1}: ${btn.getAttribute('onclick')}`);
            });
        }, 500);
        
        console.log('✅ Script completed successfully!');
    </script>
</body>
</html>
